[1mdiff --git a/latest_movie/djan/migrations/0001_initial.py b/latest_movie/djan/migrations/0001_initial.py[m
[1mnew file mode 100644[m
[1mindex 0000000..618f977[m
[1m--- /dev/null[m
[1m+++ b/latest_movie/djan/migrations/0001_initial.py[m
[36m@@ -0,0 +1,92 @@[m
[32m+[m[32m# Generated by Django 3.2.10 on 2024-03-06 08:20[m
[32m+[m
[32m+[m[32mfrom django.conf import settings[m
[32m+[m[32mfrom django.db import migrations, models[m
[32m+[m[32mimport django.db.models.deletion[m
[32m+[m
[32m+[m
[32m+[m[32mclass Migration(migrations.Migration):[m
[32m+[m
[32m+[m[32m    initial = True[m
[32m+[m
[32m+[m[32m    dependencies = [[m
[32m+[m[32m        migrations.swappable_dependency(settings.AUTH_USER_MODEL),[m
[32m+[m[32m    ][m
[32m+[m
[32m+[m[32m    operations = [[m
[32m+[m[32m        migrations.CreateModel([m
[32m+[m[32m            name='choice',[m
[32m+[m[32m            fields=[[m
[32m+[m[32m                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),[m
[32m+[m[32m                ('choice_text', models.CharField(max_length=200)),[m
[32m+[m[32m                ('votes', models.IntegerField(default=0)),[m
[32m+[m[32m            ],[m
[32m+[m[32m        ),[m
[32m+[m[32m        migrations.CreateModel([m
[32m+[m[32m            name='director',[m
[32m+[m[32m            fields=[[m
[32m+[m[32m                ('director', models.CharField(default=None, max_length=255, primary_key=True, serialize=False)),[m
[32m+[m[32m                ('average_audience', models.IntegerField(null=True)),[m
[32m+[m[32m                ('audience_showcnt', models.IntegerField(null=True)),[m
[32m+[m[32m            ],[m
[32m+[m[32m        ),[m
[32m+[m[32m        migrations.CreateModel([m
[32m+[m[32m            name='movie_all',[m
[32m+[m[32m            fields=[[m
[32m+[m[32m                ('movie_code', models.CharField(default=None, max_length=255, primary_key=True, serialize=False)),[m
[32m+[m[32m                ('rank', models.IntegerField(null=True)),[m
[32m+[m[32m                ('rank_intensity', models.IntegerField(null=True)),[m
[32m+[m[32m                ('korean_name', models.CharField(max_length=255, null=True)),[m
[32m+[m[32m                ('open_date', models.CharField(max_length=255, null=True)),[m
[32m+[m[32m                ('audiacc', models.CharField(max_length=255, null=True)),[m
[32m+[m[32m                ('audicnt_showcnt', models.IntegerField(null=True)),[m
[32m+[m[32m                ('genre', models.CharField(max_length=100)),[m
[32m+[m[32m                ('running_time', models.CharField(max_length=255, null=True)),[m
[32m+[m[32m            ],[m
[32m+[m[32m        ),[m
[32m+[m[32m        migrations.CreateModel([m
[32m+[m[32m            name='user_info',[m
[32m+[m[32m            fields=[[m
[32m+[m[32m                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),[m
[32m+[m[32m                ('choice', models.ForeignKey(default=None, null=True, on_delete=django.db.models.deletion.CASCADE, to='djan.choice')),[m
[32m+[m[32m                ('movie', models.ForeignKey(null=True, on_delete=django.db.models.deletion.CASCADE, to='djan.movie_all')),[m
[32m+[m[32m                ('user', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, to=settings.AUTH_USER_MODEL)),[m
[32m+[m[32m            ],[m
[32m+[m[32m        ),[m
[32m+[m[32m        migrations.CreateModel([m
[32m+[m[32m            name='movie_rating',[m
[32m+[m[32m            fields=[[m
[32m+[m[32m                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),[m
[32m+[m[32m                ('choice', models.ForeignKey(default=None, null=True, on_delete=django.db.models.deletion.CASCADE, to='djan.choice')),[m
[32m+[m[32m                ('movie', models.ForeignKey(null=True, on_delete=django.db.models.deletion.CASCADE, to='djan.movie_all')),[m
[32m+[m[32m                ('user', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, to=settings.AUTH_USER_MODEL)),[m
[32m+[m[32m            ],[m
[32m+[m[32m        ),[m
[32m+[m[32m        migrations.CreateModel([m
[32m+[m[32m            name='movie_info',[m
[32m+[m[32m            fields=[[m
[32m+[m[32m                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),[m
[32m+[m[32m                ('story', models.TextField(null=True)),[m
[32m+[m[32m                ('accessible', models.CharField(max_length=100)),[m
[32m+[m[32m                ('country', models.CharField(max_length=100)),[m
[32m+[m[32m                ('company', models.CharField(max_length=100)),[m
[32m+[m[32m                ('poster', models.URLField(null=True)),[m
[32m+[m[32m                ('movie', models.ManyToManyField(related_name='movie_all', to='djan.movie_all')),[m
[32m+[m[32m            ],[m
[32m+[m[32m        ),[m
[32m+[m[32m        migrations.AddField([m
[32m+[m[32m            model_name='choice',[m
[32m+[m[32m            name='movie',[m
[32m+[m[32m            field=models.ForeignKey(null=True, on_delete=django.db.models.deletion.CASCADE, to='djan.movie_all'),[m
[32m+[m[32m        ),[m
[32m+[m[32m        migrations.CreateModel([m
[32m+[m[32m            name='answer',[m
[32m+[m[32m            fields=[[m
[32m+[m[32m                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),[m
[32m+[m[32m                ('content', models.TextField()),[m
[32m+[m[32m                ('answer_date', models.DateTimeField(auto_now_add=True)),[m
[32m+[m[32m                ('author', models.ForeignKey(null=True, on_delete=django.db.models.deletion.CASCADE, to=settings.AUTH_USER_MODEL)),[m
[32m+[m[32m                ('movie', models.ForeignKey(null=True, on_delete=django.db.models.deletion.CASCADE, to='djan.movie_all')),[m
[32m+[m[32m            ],[m
[32m+[m[32m        ),[m
[32m+[m[32m    ][m
[1mdiff --git a/latest_movie/djan/migrations/0002_auto_20240305_2208.py b/latest_movie/djan/migrations/0002_auto_20240305_2208.py[m
[1mnew file mode 100644[m
[1mindex 0000000..f65ee76[m
[1m--- /dev/null[m
[1m+++ b/latest_movie/djan/migrations/0002_auto_20240305_2208.py[m
[36m@@ -0,0 +1,24 @@[m
[32m+[m[32m# Generated by Django 3.2.10 on 2024-03-05 13:08[m
[32m+[m
[32m+[m[32mfrom django.db import migrations, models[m
[32m+[m
[32m+[m
[32m+[m[32mclass Migration(migrations.Migration):[m
[32m+[m
[32m+[m[32m    dependencies = [[m
[32m+[m[32m        ('djan', '0001_initial'),[m
[32m+[m[32m    ][m
[32m+[m
[32m+[m[32m    operations = [[m
[32m+[m[32m        migrations.CreateModel([m
[32m+[m[32m            name='director',[m
[32m+[m[32m            fields=[[m
[32m+[m[32m                ('director', models.CharField(default=None, max_length=255, primary_key=True, serialize=False)),[m
[32m+[m[32m                ('average_audience', models.IntegerField(null=True)),[m
[32m+[m[32m                ('audience_showcnt', models.IntegerField(null=True)),[m
[32m+[m[32m            ],[m
[32m+[m[32m        ),[m
[32m+[m[32m        migrations.DeleteModel([m
[32m+[m[32m            name='Movie_Ranking',[m
[32m+[m[32m        ),[m
[32m+[m[32m    ][m
[1mdiff --git a/latest_movie/djan/models.py b/latest_movie/djan/models.py[m
[1mindex 36d675a..2ffce72 100644[m
[1m--- a/latest_movie/djan/models.py[m
[1m+++ b/latest_movie/djan/models.py[m
[36m@@ -44,10 +44,17 @@[m [mclass answer(models.Model):[m
     author = models.ForeignKey(User,null=True, on_delete=models.CASCADE)[m
 [m
 # Ïú†Ï†ÄÏùò Î™®Îç∏ [m
[31m-class userinfo(models.Model):[m
[32m+[m[32mclass user_info(models.Model):[m
     movie = models.ForeignKey(movie_all, null=True, on_delete=models.CASCADE)[m
     user = models.ForeignKey(User, on_delete=models.CASCADE)[m
[31m-    choice = models.ForeignKey(Choice, null=True, default=None, on_delete=models.CASCADE)[m
[32m+[m[32m    choice = models.ForeignKey(choice, null=True, default=None, on_delete=models.CASCADE)[m
[32m+[m[32m    def save(self, *args, **kwargs):[m
[32m+[m[32m        # Movie_Ranking Ïù∏Ïä§ÌÑ¥Ïä§Í∞Ä ÏÉàÎ°ú ÏÉùÏÑ±ÎêòÎäî Í≤ΩÏö∞ÏóêÎßå choice Ïù∏Ïä§ÌÑ¥Ïä§ ÏÉùÏÑ±[m
[32m+[m[32m        super().save(*args, **kwargs)  # Î∂ÄÎ™® ÌÅ¥ÎûòÏä§Ïùò save Î©îÏÑúÎìú Ìò∏Ï∂úÎ°ú Ïù∏Ïä§ÌÑ¥Ïä§ Ï†ÄÏû•[m
[32m+[m[32m            # ÏÉàÎ°úÏö¥ Movie_Ranking Ïù∏Ïä§ÌÑ¥Ïä§Ïóê ÎåÄÌï¥ choice Ïù∏Ïä§ÌÑ¥Ïä§ ÏÉùÏÑ±[m
[32m+[m[32m        if not choice.objects.filter(movie=self.movie).exists():[m
[32m+[m[32m            for i in range(1, 6):  # 1, 2, 3Ïóê ÎåÄÌïú choice Ïù∏Ïä§ÌÑ¥Ïä§ ÏÉùÏÑ±[m
[32m+[m[32m                choice.objects.create(movie=self, choice_text=str(i),votes=0)[m
 [m
 class movie_info(models.Model):[m
     movie = models.ManyToManyField(movie_all, related_name='movie_all')[m
[36m@@ -60,17 +67,14 @@[m [mclass movie_info(models.Model):[m
 class movie_rating(models.Model):[m
     movie = models.ForeignKey(movie_all, null=True, on_delete=models.CASCADE)[m
     user = models.ForeignKey(User, on_delete=models.CASCADE)[m
[31m-    choice = models.ForeignKey(Choice, null=True, default=None, on_delete=models.CASCADE)[m
[32m+[m[32m    choice = models.ForeignKey(choice, null=True, default=None, on_delete=models.CASCADE)[m
 [m
     def save(self, *args, **kwargs):[m
[31m-        # ÏÉàÎ°úÏö¥ Ìà¨Ìëú Ïù∏Ïä§ÌÑ¥Ïä§Í∞Ä ÏÉùÏÑ±ÎêòÎäî Í≤ΩÏö∞ÏóêÎßå Choice Ïù∏Ïä§ÌÑ¥Ïä§ ÏÉùÏÑ±[m
[32m+[m[32m        # ÏÉàÎ°úÏö¥ Ìà¨Ìëú Ïù∏Ïä§ÌÑ¥Ïä§Í∞Ä ÏÉùÏÑ±ÎêòÎäî Í≤ΩÏö∞ÏóêÎßå choice Ïù∏Ïä§ÌÑ¥Ïä§ ÏÉùÏÑ±[m
         super().save(*args, **kwargs)  # Î∂ÄÎ™® ÌÅ¥ÎûòÏä§Ïùò save Î©îÏÑúÎìú Ìò∏Ï∂úÎ°ú Ïù∏Ïä§ÌÑ¥Ïä§ Ï†ÄÏû•[m
[31m-            # Ïù¥ÎØ∏ Ìï¥Îãπ ÏòÅÌôîÏóê ÎåÄÌïú Choice Ïù∏Ïä§ÌÑ¥Ïä§Í∞Ä ÏÉùÏÑ±ÎêòÏóàÎäîÏßÄ ÌôïÏù∏[m
[31m-        try:[m
[31m-                # ÏÉàÎ°úÏö¥ Ìà¨Ìëú Ïù∏Ïä§ÌÑ¥Ïä§Ïóê ÎåÄÌï¥ Choice Ïù∏Ïä§ÌÑ¥Ïä§ ÏÉùÏÑ±[m
[31m-            for i in range(1, 6):  # 1, 2, 3, 4, 5Ïóê ÎåÄÌïú Choice Ïù∏Ïä§ÌÑ¥Ïä§ ÏÉùÏÑ±[m
[31m-                Choice.objects.create(movie=self.movie, choice_text=str(i), votes=0)[m
[31m-        except IntegrityError:[m
[31m-            pass[m
[32m+[m[32m            # Ïù¥ÎØ∏ Ìï¥Îãπ ÏòÅÌôîÏóê ÎåÄÌïú choice Ïù∏Ïä§ÌÑ¥Ïä§Í∞Ä ÏÉùÏÑ±ÎêòÏóàÎäîÏßÄ ÌôïÏù∏[m
[32m+[m[32m        if not choice.objects.filter(movie=self.movie).exists():[m
[32m+[m[32m            for i in range(1, 6):[m
[32m+[m[32m                    choice.objects.create(movie=self.movie, choice_text=str(i), votes=0)[m
 [m
             [m
\ No newline at end of file[m
[1mdiff --git a/latest_movie/djan/views.py b/latest_movie/djan/views.py[m
[1mindex e4f7fab..8d5ba46 100644[m
[1m--- a/latest_movie/djan/views.py[m
[1m+++ b/latest_movie/djan/views.py[m
[36m@@ -52,7 +52,7 @@[m [mdef search(request, movie_code=None):[m
         ).distinct()[m
 [m
     # ÌéòÏù¥ÏßÄÎãπ 10Í∞úÏî© Î≥¥Ïó¨Ï£ºÍ∏∞[m
[31m-    paginator = Paginator(movie_list, 5)[m
[32m+[m[32m    paginator = Paginator(movie_list, 10)[m
     # ÌòÑÏû¨ ÌéòÏù¥ÏßÄÏùò movie_all Í∞ùÏ≤¥Îì§ÏùÑ page_obj Î≥ÄÏàòÏóê Ï†ÄÏû•[m
     page_obj = paginator.get_page(page)[m
     # ÌòÑÏû¨ ÌéòÏù¥ÏßÄÏóê Ìï¥ÎãπÌïòÎäî movie_all Í∞ùÏ≤¥Îì§ÏùÑ 'movie_list'ÎùºÎäî Î≥ÄÏàòÎ°ú [m
[1mdiff --git a/latest_movie/templates/djan/search.html b/latest_movie/templates/djan/search.html[m
[1mindex c162f09..b4ec053 100644[m
[1m--- a/latest_movie/templates/djan/search.html[m
[1m+++ b/latest_movie/templates/djan/search.html[m
[36m@@ -126,46 +126,21 @@[m
     <input type="hidden" id="page" name="page" value="{{ page }}">[m
 </form>[m
 [m
[31m-<script>[m
[31m-    // ÌéòÏù¥ÏßÄ Î°úÎìúÍ∞Ä ÏôÑÎ£åÎêòÎ©¥ Ïã§ÌñâÎêòÎäî Ìï®Ïàò[m
[31m-    window.onload = function() {[m
[31m-        // ÌéòÏù¥ÏßÄ Î≤àÌò∏ ÌÅ¥Î¶≠ Ïù¥Î≤§Ìä∏ Ï≤òÎ¶¨[m
[31m-        var pageElements = document.getElementsByClassName("page-link");[m
[31m-        for (var i = 0; i < pageElements.length; i++) {[m
[31m-            pageElements[i].onclick = function(event) {[m
[31m-                event.preventDefault(); // Í∏∞Î≥∏ ÎèôÏûë Î∞©ÏßÄ[m
[31m-                console.log('ÌéòÏù¥ÏßÄ Î≤ÑÌäºÏù¥ ÌÅ¥Î¶≠ÎêòÏóàÏäµÎãàÎã§.');[m
[31m-                // ÌéòÏù¥ÏßÄ Î≤àÌò∏Î•º ÏùΩÏñ¥ÏôÄ, id="page"Ïù∏ ÏûÖÎ†• ÌïÑÎìúÏùò Í∞íÏùÑ Ìï¥Îãπ ÌéòÏù¥ÏßÄ Î≤àÌò∏Î°ú ÏÑ§Ï†ï[m
[31m-                document.getElementById('page').value = this.getAttribute('data-page');[m
[31m-                // Í≤ÄÏÉâ ÏñëÏãùÏùÑ ÏûêÎèôÏúºÎ°ú Ï†úÏ∂úÌï©ÎãàÎã§. Ïù¥Î†áÍ≤å ÌïòÎ©¥ ÌéòÏù¥ÏßÄ Î≤àÌò∏ Î≥ÄÍ≤ΩÍ≥º Ìï®Íªò Í≤ÄÏÉâ ÏñëÏãùÏù¥[m
[31m-                // Ï†úÏ∂úÎêòÏñ¥ ÏÉàÎ°úÏö¥ ÌéòÏù¥ÏßÄ ÎÇ¥Ïö©ÏùÑ Î°úÎìú[m
[31m-                document.getElementById('searchForm').submit();[m
[31m-            };[m
[31m-        }[m
[31m-[m
[31m-        // Í≤ÄÏÉâ Î≤ÑÌäº ÌÅ¥Î¶≠ Ïù¥Î≤§Ìä∏ Ï≤òÎ¶¨[m
[31m-        var btnSearch = document.getElementById("btn_search");[m
[31m-        btnSearch.onclick = function(event) {[m
[31m-            event.preventDefault();[m
[31m-            console.log('Í≤ÄÏÉâ Î≤ÑÌäºÏù¥ ÌÅ¥Î¶≠ÎêòÏóàÏäµÎãàÎã§.');[m
[31m-            document.getElementById('kw').value = document.getElementById('search_kw').value;[m
[31m-            document.getElementById('page').value = 1; // Í≤ÄÏÉâÎ≤ÑÌäºÏùÑ ÌÅ¥Î¶≠Ìï† Í≤ΩÏö∞ 1ÌéòÏù¥ÏßÄÎ∂ÄÌÑ∞ Ï°∞ÌöåÌïúÎã§.[m
[31m-            document.getElementById('searchForm').submit();[m
[31m-        };[m
[31m-    };[m
[31m-</script>[m
[31m-[m
 {% endblock %}[m
[31m-<!-- [m
[32m+[m
 {% block script %}[m
 <script type='text/javascript'>[m
[31m-    // ÌéòÏù¥ÏßÄ Î≤àÌò∏ ÌÅ¥Î¶≠ Ïù¥Î≤§Ìä∏ Ï≤òÎ¶¨[m
[32m+[m[32m// ÌéòÏù¥ÏßÄ ÎßÅÌÅ¨Î•º Í∞ÄÎ¶¨ÌÇ§Îäî ÏöîÏÜåÎì§ÏùÑ Î™®Îëê Í∞ÄÏ†∏ÏòµÎãàÎã§. Ïù¥ ÏöîÏÜåÎì§ÏùÄ Í∞ÅÍ∞Å ÌéòÏù¥ÏßÄÎ•º[m[41m [m
[32m+[m[32m// ÎÇòÌÉÄÎÇ¥Îäî ÎßÅÌÅ¨Î•º ÌÅ¥Î¶≠Ìï† ÎïåÎßàÎã§ ÌéòÏù¥ÏßÄÎ•º Î≥ÄÍ≤ΩÌïòÎèÑÎ°ù Íµ¨ÏÑ±[m
[32m+[m
     const page_elements = document.getElementsByClassName("page-link");[m
[32m+[m[32m    // Í∞ÄÏ†∏Ïò® ÌéòÏù¥ÏßÄ ÎßÅÌÅ¨ ÏöîÏÜåÏóê ÎåÄÌï¥ Î∞òÎ≥µÏ†ÅÏúºÎ°ú ÏûëÏóÖÏùÑ ÏàòÌñâÌïòÍ∏∞ ÏúÑÌï¥ forEach Î£®ÌîÑÎ•º ÏÇ¨Ïö©[m
     Array.from(page_elements).forEach(function(element) {[m
[31m-        // ÌÅ¥Î¶≠ Ïù¥Î≤§Ìä∏ Ï†ïÏùò(ÌÅ¥Î¶≠ÏùÑ ÌñàÏùÑÎïå)[m
         element.addEventListener('click', function() {[m
[31m-            console.log('ÌéòÏù¥ÏßÄ Î≤ÑÌäºÏù¥ ÌÅ¥Î¶≠ÎêòÏóàÏäµÎãàÎã§.');[m
[31m-            // ÌéòÏù¥ÏßÄ Î≤àÌò∏Î•º ÏùΩÏñ¥ÏôÄ, id="page"Ïù∏ ÏûÖÎ†• ÌïÑÎìúÏùò Í∞íÏùÑ Ìï¥Îãπ ÌéòÏù¥ÏßÄ Î≤àÌò∏Î°ú ÏÑ§Ï†ï[m
[32m+[m
[32m+[m[32m            //  ÌòÑÏû¨ ÌÅ¥Î¶≠Îêú ÌéòÏù¥ÏßÄ ÎßÅÌÅ¨ ÏöîÏÜåÏóêÏÑú Îç∞Ïù¥ÌÑ∞ ÏÜçÏÑ±Ïù∏ 'data-page'Î•º ÏÇ¨Ïö©ÌïòÏó¨ Ìï¥Îãπ[m[41m [m
[32m+[m[32m            // ÌéòÏù¥ÏßÄ Î≤àÌò∏Î•º Í∞ÄÏ†∏ÏòµÎãàÎã§. Í∑∏Î¶¨Í≥† Ïù¥ Í∞íÏùÑ Ïà®Í≤®ÏßÑ 'page' ÌïÑÎìúÏóê ÏÑ§Ï†ïÌï©ÎãàÎã§.[m[41m [m
[32m+[m[32m            // Ïù¥Î†áÍ≤å Ìï®ÏúºÎ°úÏç® ÌéòÏù¥ÏßÄÍ∞Ä Î≥ÄÍ≤ΩÎêòÏóàÏùåÏùÑ Í≤ÄÏÉâ ÏñëÏãùÏóê ÏïåÎ¶ΩÎãàÎã§.[m
             document.getElementById('page').value = this.dataset.page;[m
             // Í≤ÄÏÉâ ÏñëÏãùÏùÑ ÏûêÎèôÏúºÎ°ú Ï†úÏ∂úÌï©ÎãàÎã§. Ïù¥Î†áÍ≤å ÌïòÎ©¥ ÌéòÏù¥ÏßÄ Î≤àÌò∏ Î≥ÄÍ≤ΩÍ≥º Ìï®Íªò Í≤ÄÏÉâ ÏñëÏãùÏù¥[m
             // Ï†úÏ∂úÎêòÏñ¥ ÏÉàÎ°úÏö¥ ÌéòÏù¥ÏßÄ ÎÇ¥Ïö©ÏùÑ Î°úÎìú[m
[36m@@ -174,10 +149,9 @@[m
     });[m
     const btn_search = document.getElementById("btn_search");[m
     btn_search.addEventListener('click', function() {[m
[31m-        console.log('Í≤ÄÏÉâ Î≤ÑÌäºÏù¥ ÌÅ¥Î¶≠ÎêòÏóàÏäµÎãàÎã§.');[m
         document.getElementById('kw').value = document.getElementById('search_kw').value;[m
         document.getElementById('page').value = 1;  // Í≤ÄÏÉâÎ≤ÑÌäºÏùÑ ÌÅ¥Î¶≠Ìï† Í≤ΩÏö∞ 1ÌéòÏù¥ÏßÄÎ∂ÄÌÑ∞ Ï°∞ÌöåÌïúÎã§.[m
         document.getElementById('searchForm').submit();[m
     });[m
 </script>[m
[31m-{% endblock %} -->[m
\ No newline at end of file[m
[32m+[m[32m{% endblock %}[m
\ No newline at end of file[m
